# Админ Панель - Инструкция

## Доступ

Админ панель доступна по адресу `/admin` и открывается только для пользователя с ID = 1 (администратор).

## Функционал

### 1. Анализ Продаж (Sales Analytics)

- **Объём продаж** - Общая сумма заказов за выбранный период
- **Себестоимость** - Сумма расходов на товары (вычисляется на основе `costPrice`)
- **Gross Profit** - Разница между объёмом и себестоимостью
- **Маржа** - Процент прибыли от объёма

Периоды: День, Неделя, Месяц

### 2. ТОП Товары (Top Products)

- **ТОП-10 по Объёму** - Товары, принёсшие наибольшую сумму продаж
- **ТОП-10 по Прибыли** - Товары с наибольшей прибылью

### 3. Анализ Дилеров (Dealer Analytics)

- Список всех дилеров, отсортированный по объёму закупок в денежном выражении
- Показывает количество заказов каждого дилера

### 4. Отслеживание Долгов (Debt Tracking)

Вычисляется как: **Сумма Обычных Заказов + (Реализация Отгружено - Реализация Оплачено)**

- **Состояние Долгов** - Карточка для каждого дилера с его долгом
- **Детали Реализации** - Информация по товарам в реализации

### 5. Отслеживание Реализации (Realization Tracking)

Список товаров, отгруженных в реализацию:

- Статус: PENDING, PARTIAL, COMPLETED, CANCELLED
- Может быть расширена (нажать на строку) для просмотра деталей
- Кнопка "Добавить Платёж" для учёта платежей дилера

## Как работает Реализация

### Со стороны дилера:

1. Вместо кнопки "Оформить заказ" дилер может нажать "Запрос на реализацию"
2. Товар отгружается дилеру
3. Дилер продаёт товар в течение оговоренного времени
4. Дилер платит столько, сколько продал

### Со стороны админа:

1. На вкладке "Реализация" видны все товары в реализации
2. Админ может добавлять платежи по мере их поступления
3. Статус автоматически меняется:
   - PENDING → Нет платежей
   - PARTIAL → Часть оплачена
   - COMPLETED → Полностью оплачена

## База Данных

### Новые таблицы:

- `Realization` - Основная запись о реализации
- `RealizationItem` - Товары в реализации
- `RealizationPayment` - Платежи по реализации

### Новые поля:

- `Product.costPrice` - Себестоимость товара (для расчёта прибыли)

## Примечания

- Себестоимость товаров нужно задать в БД вручную
- Статусы реализации обновляются автоматически при добавлении платежей
- Все суммы в MDL (молдавские леи)
